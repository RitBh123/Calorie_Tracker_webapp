<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Net Calorie Tracker Form</title>
        <script src="../static/script.js"></script>
    </head>
    <body>
        {% with messages = get_flashed_messages() %}
            {% if messages %}
                <ul class="flash-messages">
                    {% for message in messages %}
                        <li>{{ message }}</li>
                    {% endfor %}
                </ul>
            {% endif %}
        {% endwith %}

        <h1>Net Calorie Tracker Form</h1>
        <form id="calorieForm" method="POST" action="/submit">
            <!-- User Information Section -->
            <h2>User Information</h2>
            <label for="UID">User ID:</label>
            <input type="number" id="UID" name="UID" required autocomplete="off">
            {% if errors and 'UID' in errors %}
                <p class="error-message">{{ errors['UID'] }}</p>
            {% endif %}
            <br>
            <label for="name">Name:</label>
            <input type="text" id="name" name="name" required autocomplete="off">
            {% if errors and 'name' in errors %}
                <p class="error-message">{{ errors['name'] }}</p>
            {% endif %}
            <br>
            <label for="age">Age:</label>
            <input type="number" id="age" name="age" required autocomplete="off">
            {% if errors and 'age' in errors %}
                <p class="error-message">{{ errors['age'] }}</p>
            {% endif %}
            <br>
            <label for="weight">Weight (kg):</label>
            <input type="number" id="weight" name="weight" required autocomplete="off">
            {% if errors and 'weight' in errors %}
                <p class="error-message">{{ errors['weight'] }}</p>
            {% endif %}
            <br>
            <label for="height">Height (cm):</label>
            <input type="number" id="height" name="height" required autocomplete="off">
            {% if errors and 'height' in errors %}
                <p class="error-message">{{ errors['height'] }}</p>
            {% endif %}
            <br>
            <label for="sex">Sex:</label>
            <select id="sex" name="sex" required autocomplete="off">
                <option value="male">Male</option>
                <option value="female">Female</option>
            </select>
            {% if errors and 'sex' in errors %}
                <p class="error-message">{{ errors['sex'] }}</p>
            {% endif %}
            <br>

            <!-- Food Intake Section -->
            <h2>Food Intake</h2>
            <label for="food">Food:</label>
            <select id="food" name="food" required>
                <option value="" disabled selected>Please Select</option>
                {% for option in food_options %}
                <option value="{{ option['name'] }}" data-calories="{{ option['Calories'] }}" data-servingdescription="{{ option['Serving_Description_1_g'] }}">{{ option['name'] }}</option>
                {% endfor %}
            </select>
            {% if errors and 'food' in errors %}
                <p class="error-message">{{ errors['food'] }}</p>
            {% endif %}
            <br>
            <label for="calories">Calories:</label>
            <input type="text" id="calories" name="calories" readonly>
            {% if errors and 'calories' in errors %}
                <p class="error-message">{{ errors['calories'] }}</p>
            {% endif %}
            <br>
            <label for="serving_description">Serving Description:</label>
            <input type="text" id="serving_description" name="serving_description" readonly>
            {% if errors and 'serving_description' in errors %}
                <p class="error-message">{{ errors['serving_description'] }}</p>
            {% endif %}
            <br>
            <label for="meal">Meal Time:</label>
            <select id="meal" name="meal" required>
                <option value="breakfast">Breakfast</option>
                <option value="lunch">Lunch</option>
                <option value="dinner">Dinner</option>
                <option value="snack">Snack</option>
            </select>
            {% if errors and 'meal' in errors %}
                <p class="error-message">{{ errors['meal'] }}</p>
            {% endif %}
            <br>
            <label for="no_servings">Number of servings:</label>
            <input type="number" id="no_servings" name="no_servings" required>
            {% if errors and 'no_servings' in errors %}
                <p class="error-message">{{ errors['no_servings'] }}</p>
            {% endif %}
            <br>

            <h2>Activity</h2>
            <label for="activity_select">Select Activity:</label>
            <select id="activity_select" name="activity_select" required>
                <option value="null" selected>Select Activity</option>
                {% for activity in activities %}
                <option value="{{ activity }}">{{ activity }}</option>
                {% endfor %}
            </select>
            {% if errors and 'activity_select' in errors %}
                <p class="error-message">{{ errors['activity_select'] }}</p>
            {% endif %}
            <br>
            <label for="specific_motion_select">Select Specific Motion:</label>
            <select id="specific_motion_select" name="specific_motion_select" disabled required>
                <option value="">Select Specific Motion</option>
            </select>
            {% if errors and 'specific_motion_select' in errors %}
                <p class="error-message">{{ errors['specific_motion_select'] }}</p>
            {% endif %}
            <br>
            <label for="duration">Duration (mins):</label>
            <input type="number" id="duration" name="duration" required>
            {% if errors and 'duration' in errors %}
                <p class="error-message">{{ errors['duration'] }}</p>
            {% endif %}
            <br>
            <input type="hidden" id="bmr" name="bmr">

            <!-- Date Selection Section -->
            <h2>Date Selection</h2>
            <label for="date_input">Select a date (up to 30 days before today):</label><br>
            <input type="date" id="date_input" name="date_input" min="{{ thirty_days_ago }}" max="{{ today }}" required>
            {% if errors and 'date_input' in errors %}
                <p class="error-message">{{ errors['date_input'] }}</p>
            {% endif %}
            <br><br>

            <!-- Submit Button -->
            <button type="submit">Submit</button>
            &nbsp &nbsp &nbsp
            <button onclick="window.location.href = '/';">Back to Home</button>
        </form>
    <p> Created By Ritwick Bhattacharya. </p>
    </body>
</html>
